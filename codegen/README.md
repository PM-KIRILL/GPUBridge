
# GPUBridge: –°–∏—Å—Ç–µ–º–∞ —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ GPU —á–µ—Ä–µ–∑ RPC

## üõ† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É **human-in-the-loop** —Å –¥–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º:

### 1. –≠—Ç–∞–ø –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (`annotationgen.py`)
```python
# –ü—Ä–∏–º–µ—Ä –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤ annotations.h
/**
 * @param dest SEND_ONLY LENGTH:count  // –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
 * @param src  RECV_ONLY LENGTH:count  // –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
 * @param count SIZE:8                // –†–∞–∑–º–µ—Ä –±–ª–æ–∫–∞
 */
void cudaMemcpy(void* dest, const void* src, size_t count);
```

**–ö–ª—é—á–µ–≤—ã–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏:**
| –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è           | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                          | –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è         |
|---------------------|-----------------------------------|---------------------------|
| `SEND_ONLY`         | –¢–æ–ª—å–∫–æ –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö            | –£–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è       |
| `RECV_ONLY`         | –¢–æ–ª—å–∫–æ –ø—Ä–∏—ë–º –¥–∞–Ω–Ω—ã—Ö               | –ë—É—Ñ–µ—Ä—ã –∏—Å—Ç–æ—á–Ω–∏–∫–∞          |
| `LENGTH:<param>`    | –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö        | `LENGTH:count`            |
| `NULL_TERMINATED`   | –†–∞–±–æ—Ç–∞ —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏                | –¢–µ–∫—Å—Ç–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã       |

### 2. –≠—Ç–∞–ø –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞ (`codegen.py`)
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç:
- –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ RPC-—Å—Ç–∞–±—ã
- –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—ã–∑–æ–≤–æ–≤
- –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

```mermaid
graph TD
    A[–ó–∞–≥–æ–ª–æ–≤–∫–∏ CUDA] --> B[annotationgen.py]
    B --> C[annotations.h]
    C --> D[–†—É—á–Ω–∞—è –ø—Ä–∞–≤–∫–∞]
    D --> E[codegen.py]
    E --> F[–ö–ª–∏–µ–Ω—Ç/–°–µ—Ä–≤–µ—Ä]
```

## üîå –ü–æ—á–µ–º—É —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª?
**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞–º–∏:**

| –ö—Ä–∏—Ç–µ—Ä–∏–π          | GPUBridge       | Protobuf/GRPC   |
|-------------------|----------------|----------------|
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | ‚ö° –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –ø–∞–º—è—Ç–∏ | üê¢ –î–≤–æ–π–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ |
| –ì–∏–±–∫–æ—Å—Ç—å          | üîß –ö–∞—Å—Ç–æ–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ | üß© –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ |
| –û–±—ä—ë–º –∫–æ–¥–∞        | ü™∂ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π   | üèóÔ∏è –¢—Ä–µ–±—É–µ—Ç .proto-—Ñ–∞–π–ª–æ–≤ |

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–∞—à–µ–≥–æ —Ä–µ—à–µ–Ω–∏—è:**
1. –ù—É–ª–µ–≤—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å:
   - –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ –±—É—Ñ–µ—Ä–∞–º–∏ (`cudaArray_t`)
   - –ü–æ—Ç–æ–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö (`cudaStream_t`)
2. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:
   ```c++
   // –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è cudaMemcpy
   switch(kind) {
       case cudaMemcpyHostToDevice: //... 
       case cudaMemcpyDeviceToHost: //...
   }
   ```
